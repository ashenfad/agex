<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="agex:-A-Demo-of-Runtime-Interoperability">agex: A Demo of Runtime Interoperability<a class="anchor-link" href="#agex:-A-Demo-of-Runtime-Interoperability">¬∂</a></h1><p>Welcome to the <code>agex</code> demo! This notebook showcases the core philosophy of the framework: enabling AI agents to work with real, rich Python objects, just like a human developer.</p>
<p><strong>The Story:</strong> We, as the developer, will act as the orchestrator. Our goal is to create a sales trend visualization. We will use two specialist AI agents:</p>
<ol>
<li>A <code>DatabaseExpert</code> that can query a database and return a <code>pandas.DataFrame</code>.</li>
<li>A <code>VisualizationExpert</code> that can take a <code>DataFrame</code> and create a <code>plotly.Figure</code>.</li>
</ol>
<p>Notice what we <strong>don't</strong> have to do: no writing JSON schemas, no saving data to files to pass between steps, and no context window explosions. Let's begin.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-1:-Setup-and-Environment">Step 1: Setup and Environment<a class="anchor-link" href="#Step-1:-Setup-and-Environment">¬∂</a></h3><p>First, let's import our libraries and create an in-memory SQLite database populated with some realistic, seasonal sales data. The <code>create_in_memory_db</code> function returns a live <code>sqlite3.Connection</code> object.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In¬†[¬†]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">plotly.express</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">px</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">display</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">agex</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span><span class="p">,</span> <span class="n">Versioned</span><span class="p">,</span> <span class="n">events</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">agex.helpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_pandas</span> 
<span class="kn">from</span><span class="w"> </span><span class="nn">agex.llm</span><span class="w"> </span><span class="kn">import</span> <span class="n">DummyLLMClient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">plotly.graph_objects</span><span class="w"> </span><span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">examples.db_primer</span><span class="w"> </span><span class="kn">import</span> <span class="n">PRIMER</span>

<span class="c1"># Our helpers for demo setup and canned responses</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">examples.notebook.helper</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">create_in_memory_db</span><span class="p">,</span> 
    <span class="n">DB_QUERY_RESPONSE</span><span class="p">,</span> 
    <span class="n">VISUALIZATION_RESPONSE</span>
<span class="p">)</span>

<span class="n">db_connection</span> <span class="o">=</span> <span class="n">create_in_memory_db</span><span class="p">()</span>

<span class="c1"># create persistent state for the agents &amp; their computational workspaces</span>
<span class="n">state</span> <span class="o">=</span> <span class="n">Versioned</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-2:-Define-and-Use-the-DatabaseExpert">Step 2: Define and Use the DatabaseExpert<a class="anchor-link" href="#Step-2:-Define-and-Use-the-DatabaseExpert">¬∂</a></h3><p>Next, we'll define our <code>DatabaseExpert</code>. We'll give it access to the live <code>db_connection</code> object and the <code>pandas</code> library.</p>
<p>To make this demo fast and reproducible, we'll use a <code>DummyLLMClient</code> with pre-defined responses. This lets us focus on <code>agex</code>'s unique capabilities without the unpredictability of live LLM calls.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In¬†[¬†]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">db_expert</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"db_expert"</span><span class="p">,</span> 
    <span class="n">primer</span><span class="o">=</span><span class="n">PRIMER</span><span class="p">,</span> <span class="c1"># coach the agent on how to use the db</span>
<span class="p">)</span>
<span class="n">db_expert</span><span class="o">.</span><span class="n">llm_client</span> <span class="o">=</span> <span class="n">DummyLLMClient</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">[</span><span class="n">DB_QUERY_RESPONSE</span><span class="p">])</span>

<span class="c1"># Give the agent access to the live database connection</span>
<span class="n">db_expert</span><span class="o">.</span><span class="n">module</span><span class="p">(</span>
    <span class="n">db_connection</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"db"</span><span class="p">,</span>
    <span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s2">"execute"</span><span class="p">,</span> <span class="s2">"executemany"</span><span class="p">,</span> <span class="s2">"commit"</span><span class="p">],</span>
<span class="p">)</span>

<span class="c1"># register the Cursor class for gathering results</span>
<span class="n">db_expert</span><span class="o">.</span><span class="n">cls</span><span class="p">(</span><span class="n">sqlite3</span><span class="o">.</span><span class="n">Cursor</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s2">"fetchone"</span><span class="p">,</span> <span class="s2">"fetchall"</span><span class="p">,</span> <span class="s2">"description"</span><span class="p">])</span>

<span class="c1"># use the pre-existing helper to register pandas</span>
<span class="n">register_pandas</span><span class="p">(</span><span class="n">db_expert</span><span class="p">)</span>

<span class="c1"># define a task for our agent, the fn signature acts as a contract</span>
<span class="nd">@db_expert</span><span class="o">.</span><span class="n">task</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span> <span class="c1"># type: ignore[return-value]</span>
<span class="w">    </span><span class="sd">"""Runs a SQL query and returns the result as a pandas DataFrame."""</span>
    <span class="k">pass</span>

<span class="c1"># now we ask the agent to get the sales data for umbrellas.</span>
<span class="n">sales_df</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span>
    <span class="n">prompt</span><span class="o">=</span><span class="s2">"Find all available umbrella sales by day"</span><span class="p">,</span>
    <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-3:-Inspect-the-First-Artifact">Step 3: Inspect the First Artifact<a class="anchor-link" href="#Step-3:-Inspect-the-First-Artifact">¬∂</a></h3><p>This is the first <strong>'wow' moment</strong>. The <code>get_data</code> call didn't return a string or JSON. It returned a live, rich <code>pandas.DataFrame</code> object directly into our session. The agent came to the data, performed its work, and handed back a real object.</p>
<p>Let's prove it by displaying the DataFrame:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In¬†[¬†]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">sales_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea"><div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>date</th>
<th>product_name</th>
<th>quantity_sold</th>
<th>price_per_unit</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>2022-01-01</td>
<td>Umbrellas</td>
<td>2</td>
<td>15</td>
</tr>
<tr>
<th>1</th>
<td>2022-01-02</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
<tr>
<th>2</th>
<td>2022-01-03</td>
<td>Umbrellas</td>
<td>7</td>
<td>15</td>
</tr>
<tr>
<th>3</th>
<td>2022-01-04</td>
<td>Umbrellas</td>
<td>16</td>
<td>15</td>
</tr>
<tr>
<th>4</th>
<td>2022-01-05</td>
<td>Umbrellas</td>
<td>11</td>
<td>15</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>725</th>
<td>2023-12-27</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
<tr>
<th>726</th>
<td>2023-12-28</td>
<td>Umbrellas</td>
<td>3</td>
<td>15</td>
</tr>
<tr>
<th>727</th>
<td>2023-12-29</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
<tr>
<th>728</th>
<td>2023-12-30</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
<tr>
<th>729</th>
<td>2023-12-31</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
</tbody>
</table>
<p>730 rows √ó 4 columns</p>
</div></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-4:-Define-and-Use-the-VisualizationExpert">Step 4: Define and Use the VisualizationExpert<a class="anchor-link" href="#Step-4:-Define-and-Use-the-VisualizationExpert">¬∂</a></h3><p>Now we'll define our second specialist. Its job is to take a DataFrame and create a plot. We will pass the <code>sales_df</code> object we just received directly to this new agent.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In¬†[¬†]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">viz_expert</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"viz_expert"</span><span class="p">,</span>
    <span class="n">primer</span><span class="o">=</span><span class="s2">"You are an expert at creating plots."</span>
<span class="p">)</span>
<span class="n">viz_expert</span><span class="o">.</span><span class="n">llm_client</span> <span class="o">=</span> <span class="n">DummyLLMClient</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">[</span><span class="n">VISUALIZATION_RESPONSE</span><span class="p">])</span>

<span class="c1"># Give the agent access to the plotly express library</span>
<span class="n">viz_expert</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="n">px</span><span class="p">)</span>
<span class="n">register_pandas</span><span class="p">(</span><span class="n">viz_expert</span><span class="p">)</span>

<span class="nd">@viz_expert</span><span class="o">.</span><span class="n">task</span>
<span class="k">def</span><span class="w"> </span><span class="nf">plot_dataframe</span><span class="p">(</span><span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Figure</span><span class="p">:</span> <span class="c1"># type: ignore[return-value]</span>
<span class="w">    </span><span class="sd">"""Create a plot from the given data according to the prompt."""</span>
    <span class="k">pass</span>

<span class="c1"># Let's ask the agent to plot the DataFrame we got from the first agent.</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Passing the DataFrame to the Visualization Expert..."</span><span class="p">)</span>
<span class="n">sales_plot</span> <span class="o">=</span> <span class="n">plot_dataframe</span><span class="p">(</span>
    <span class="s2">"Please show me overlayed yearly sales cycles"</span><span class="p">,</span>
    <span class="n">sales_df</span><span class="p">,</span>
    <span class="n">state</span><span class="o">=</span><span class="n">state</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Passing the DataFrame to the Visualization Expert...
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-5:-Inspect-the-Final-Artifact">Step 5: Inspect the Final Artifact<a class="anchor-link" href="#Step-5:-Inspect-the-Final-Artifact">¬∂</a></h3><p>And here is the second <strong>'wow' moment</strong>. We passed a <code>DataFrame</code> object from one agent to another, and the second agent returned a fully interactive <code>plotly.Figure</code> object.</p>
<p>Let's display it:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In¬†[5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">sales_plot</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Curious to see the entire flow from start to finish?</p>
<p>We can replay all the internal events collected from our agents during those tasks thanks to our persistent state!</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In¬†[6]:</div>
<div class="inner_cell">
<div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">evt</span> <span class="ow">in</span> <span class="n">events</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
    <span class="n">display</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea">
<div style="border: 1px solid #e1e4e8; border-radius: 8px; padding: 16px; margin: 8px 0; background: #f6f8fa;">
<div style="font-weight: 600; color: #24292e; margin-bottom: 8px; font-size: 14px;">
            üöÄ TaskStartEvent - db_expert
        </div>
<div style="font-size: 12px; color: #6a737d; margin-bottom: 12px;">
            2025-07-25T11:30:27Z ‚Ä¢ <code style="background: #f1f3f4; padding: 1px 4px; border-radius: 2px; font-family: monospace; font-size: 11px;">2e60feb1</code>
</div>
<div style="margin-bottom: 16px;">
<div style="font-weight: 600; margin-bottom: 6px; color: #6a737d; font-size: 13px;">
            üìã prompt:
        </div>
<div style="background: #fff; padding: 12px; border-radius: 6px; border-left: 3px solid #6a737d; color: #24292e; line-height: 1.4;">
<pre style="background: #fff; padding: 8px; border-radius: 3px; margin: 0; color: #24292e; font-family: monospace;">Please give me all availble umbrella sales by day</pre>
</div>
</div>
</div>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea">
<div style="border: 1px solid #e1e4e8; border-radius: 8px; padding: 16px; margin: 8px 0; background: #f6f8fa;">
<div style="font-weight: 600; color: #24292e; margin-bottom: 8px; font-size: 14px;">
            üß† ActionEvent - db_expert
        </div>
<div style="font-size: 12px; color: #6a737d; margin-bottom: 12px;">
            2025-07-25T11:30:27Z ‚Ä¢ <code style="background: #f1f3f4; padding: 1px 4px; border-radius: 2px; font-family: monospace; font-size: 11px;">2e60feb1</code>
</div>
<div style="margin-bottom: 16px;">
<div style="font-weight: 600; margin-bottom: 6px; color: #0366d6; font-size: 13px;">
            üí≠ Thinking:
        </div>
<div style="background: #fff; padding: 12px; border-radius: 6px; border-left: 3px solid #0366d6; color: #24292e; line-height: 1.4;">
            I need to execute the SQL query and convert the results to a pandas DataFrame.
        </div>
</div>
<div>
<div style="font-weight: 600; margin-bottom: 6px; color: #28a745; font-size: 13px;">
                üêç Code:
            </div>
<div style="background: #fff; padding: 16px; border-radius: 6px; border-left: 3px solid #28a745; overflow-x: auto; font-family: 'SFMono-Regular', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace; font-size: 13px; line-height: 1.45; margin: 0;"><div class="highlight"><pre style="line-height: 125%;"><span></span><span style="color: #CB4B16">import</span><span style="color: #657B83"> </span><span style="color: #268BD2">pandas</span><span style="color: #657B83"> </span><span style="color: #859900">as</span><span style="color: #657B83"> </span><span style="color: #268BD2">pd</span>
<span style="color: #657B83">query</span> <span style="color: #93A1A1">=</span> <span style="color: #2AA198">"SELECT date, product_name, quantity_sold, price_per_unit FROM sales WHERE product_name = 'Umbrellas' ORDER BY date"</span>
<span style="color: #859900">with</span> <span style="color: #657B83">db</span><span style="color: #93A1A1">.</span><span style="color: #657B83">execute(query)</span> <span style="color: #859900">as</span> <span style="color: #657B83">cursor:</span>
    <span style="color: #657B83">df</span> <span style="color: #93A1A1">=</span> <span style="color: #657B83">pd</span><span style="color: #93A1A1">.</span><span style="color: #657B83">DataFrame(cursor</span><span style="color: #93A1A1">.</span><span style="color: #657B83">fetchall(),</span> <span style="color: #657B83">columns</span><span style="color: #93A1A1">=</span><span style="color: #657B83">[desc[</span><span style="color: #2AA198">0</span><span style="color: #657B83">]</span> <span style="color: #859900">for</span> <span style="color: #657B83">desc</span> <span style="color: #859900">in</span> <span style="color: #657B83">cursor</span><span style="color: #93A1A1">.</span><span style="color: #657B83">description])</span>
<span style="color: #657B83">task_success(df)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea">
<div style="border: 1px solid #e1e4e8; border-radius: 8px; padding: 16px; margin: 8px 0; background: #f6f8fa;">
<div style="font-weight: 600; color: #24292e; margin-bottom: 8px; font-size: 14px;">
            ‚úÖ SuccessEvent - db_expert
        </div>
<div style="font-size: 12px; color: #6a737d; margin-bottom: 12px;">
            2025-07-25T11:30:27Z ‚Ä¢ <code style="background: #f1f3f4; padding: 1px 4px; border-radius: 2px; font-family: monospace; font-size: 11px;">2e60feb1</code>
</div>
<div style="margin-bottom: 16px;">
<div style="font-weight: 600; margin-bottom: 6px; color: #28a745; font-size: 13px;">
            ‚ú® Result:
        </div>
<div style="background: #fff; padding: 12px; border-radius: 6px; border-left: 3px solid #28a745; color: #24292e; line-height: 1.4;">
<div style="margin: 5px 0;"><div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>date</th>
<th>product_name</th>
<th>quantity_sold</th>
<th>price_per_unit</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>2022-01-01</td>
<td>Umbrellas</td>
<td>2</td>
<td>15</td>
</tr>
<tr>
<th>1</th>
<td>2022-01-02</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
<tr>
<th>2</th>
<td>2022-01-03</td>
<td>Umbrellas</td>
<td>7</td>
<td>15</td>
</tr>
<tr>
<th>3</th>
<td>2022-01-04</td>
<td>Umbrellas</td>
<td>16</td>
<td>15</td>
</tr>
<tr>
<th>4</th>
<td>2022-01-05</td>
<td>Umbrellas</td>
<td>11</td>
<td>15</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>725</th>
<td>2023-12-27</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
<tr>
<th>726</th>
<td>2023-12-28</td>
<td>Umbrellas</td>
<td>3</td>
<td>15</td>
</tr>
<tr>
<th>727</th>
<td>2023-12-29</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
<tr>
<th>728</th>
<td>2023-12-30</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
<tr>
<th>729</th>
<td>2023-12-31</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
</tr>
</tbody>
</table>
<p>730 rows √ó 4 columns</p>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea">
<div style="border: 1px solid #e1e4e8; border-radius: 8px; padding: 16px; margin: 8px 0; background: #f6f8fa;">
<div style="font-weight: 600; color: #24292e; margin-bottom: 8px; font-size: 14px;">
            üöÄ TaskStartEvent - viz_expert
        </div>
<div style="font-size: 12px; color: #6a737d; margin-bottom: 12px;">
            2025-07-25T11:30:28Z ‚Ä¢ <code style="background: #f1f3f4; padding: 1px 4px; border-radius: 2px; font-family: monospace; font-size: 11px;">f2e781ec</code>
</div>
<div style="margin-bottom: 16px;">
<div style="font-weight: 600; margin-bottom: 6px; color: #6a737d; font-size: 13px;">
            üìã prompt:
        </div>
<div style="background: #fff; padding: 12px; border-radius: 6px; border-left: 3px solid #6a737d; color: #24292e; line-height: 1.4;">
<pre style="background: #fff; padding: 8px; border-radius: 3px; margin: 0; color: #24292e; font-family: monospace;">Please show me overlayed yearly sales cycles</pre>
</div>
</div>
<div style="margin-bottom: 16px;">
<div style="font-weight: 600; margin-bottom: 6px; color: #6a737d; font-size: 13px;">
            üìã df:
        </div>
<div style="background: #fff; padding: 12px; border-radius: 6px; border-left: 3px solid #6a737d; color: #24292e; line-height: 1.4;">
<div style="margin: 5px 0;"><div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>date</th>
<th>product_name</th>
<th>quantity_sold</th>
<th>price_per_unit</th>
<th>year</th>
<th>day_of_year</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>2022-01-01</td>
<td>Umbrellas</td>
<td>2</td>
<td>15</td>
<td>2022</td>
<td>1</td>
</tr>
<tr>
<th>1</th>
<td>2022-01-02</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
<td>2022</td>
<td>2</td>
</tr>
<tr>
<th>2</th>
<td>2022-01-03</td>
<td>Umbrellas</td>
<td>7</td>
<td>15</td>
<td>2022</td>
<td>3</td>
</tr>
<tr>
<th>3</th>
<td>2022-01-04</td>
<td>Umbrellas</td>
<td>16</td>
<td>15</td>
<td>2022</td>
<td>4</td>
</tr>
<tr>
<th>4</th>
<td>2022-01-05</td>
<td>Umbrellas</td>
<td>11</td>
<td>15</td>
<td>2022</td>
<td>5</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>725</th>
<td>2023-12-27</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
<td>2023</td>
<td>361</td>
</tr>
<tr>
<th>726</th>
<td>2023-12-28</td>
<td>Umbrellas</td>
<td>3</td>
<td>15</td>
<td>2023</td>
<td>362</td>
</tr>
<tr>
<th>727</th>
<td>2023-12-29</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
<td>2023</td>
<td>363</td>
</tr>
<tr>
<th>728</th>
<td>2023-12-30</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
<td>2023</td>
<td>364</td>
</tr>
<tr>
<th>729</th>
<td>2023-12-31</td>
<td>Umbrellas</td>
<td>0</td>
<td>15</td>
<td>2023</td>
<td>365</td>
</tr>
</tbody>
</table>
<p>730 rows √ó 6 columns</p>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea">
<div style="border: 1px solid #e1e4e8; border-radius: 8px; padding: 16px; margin: 8px 0; background: #f6f8fa;">
<div style="font-weight: 600; color: #24292e; margin-bottom: 8px; font-size: 14px;">
            üß† ActionEvent - viz_expert
        </div>
<div style="font-size: 12px; color: #6a737d; margin-bottom: 12px;">
            2025-07-25T11:30:28Z ‚Ä¢ <code style="background: #f1f3f4; padding: 1px 4px; border-radius: 2px; font-family: monospace; font-size: 11px;">f2e781ec</code>
</div>
<div style="margin-bottom: 16px;">
<div style="font-weight: 600; margin-bottom: 6px; color: #0366d6; font-size: 13px;">
            üí≠ Thinking:
        </div>
<div style="background: #fff; padding: 12px; border-radius: 6px; border-left: 3px solid #0366d6; color: #24292e; line-height: 1.4;">
            I need to create a line plot showing the quantity sold over time.
        </div>
</div>
<div>
<div style="font-weight: 600; margin-bottom: 6px; color: #28a745; font-size: 13px;">
                üêç Code:
            </div>
<div style="background: #fff; padding: 16px; border-radius: 6px; border-left: 3px solid #28a745; overflow-x: auto; font-family: 'SFMono-Regular', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace; font-size: 13px; line-height: 1.45; margin: 0;"><div class="highlight"><pre style="line-height: 125%;"><span></span><span style="color: #CB4B16">import</span><span style="color: #657B83"> </span><span style="color: #268BD2">pandas</span><span style="color: #657B83"> </span><span style="color: #859900">as</span><span style="color: #657B83"> </span><span style="color: #268BD2">pd</span>
<span style="color: #CB4B16">import</span><span style="color: #657B83"> </span><span style="color: #268BD2">plotly.express</span><span style="color: #657B83"> </span><span style="color: #859900">as</span><span style="color: #657B83"> </span><span style="color: #268BD2">px</span>
<span style="color: #93A1A1; font-style: italic"># Extract year and day-of-year for overlaying cycles</span>
<span style="color: #657B83">inputs</span><span style="color: #93A1A1">.</span><span style="color: #657B83">df[</span><span style="color: #2AA198">'date'</span><span style="color: #657B83">]</span> <span style="color: #93A1A1">=</span> <span style="color: #657B83">pd</span><span style="color: #93A1A1">.</span><span style="color: #657B83">to_datetime(inputs</span><span style="color: #93A1A1">.</span><span style="color: #657B83">df[</span><span style="color: #2AA198">'date'</span><span style="color: #657B83">])</span>
<span style="color: #657B83">inputs</span><span style="color: #93A1A1">.</span><span style="color: #657B83">df[</span><span style="color: #2AA198">'year'</span><span style="color: #657B83">]</span> <span style="color: #93A1A1">=</span> <span style="color: #657B83">inputs</span><span style="color: #93A1A1">.</span><span style="color: #657B83">df[</span><span style="color: #2AA198">'date'</span><span style="color: #657B83">]</span><span style="color: #93A1A1">.</span><span style="color: #657B83">dt</span><span style="color: #93A1A1">.</span><span style="color: #657B83">year</span>
<span style="color: #657B83">inputs</span><span style="color: #93A1A1">.</span><span style="color: #657B83">df[</span><span style="color: #2AA198">'day_of_year'</span><span style="color: #657B83">]</span> <span style="color: #93A1A1">=</span> <span style="color: #657B83">inputs</span><span style="color: #93A1A1">.</span><span style="color: #657B83">df[</span><span style="color: #2AA198">'date'</span><span style="color: #657B83">]</span><span style="color: #93A1A1">.</span><span style="color: #657B83">dt</span><span style="color: #93A1A1">.</span><span style="color: #657B83">dayofyear</span>

<span style="color: #657B83">fig</span> <span style="color: #93A1A1">=</span> <span style="color: #657B83">px</span><span style="color: #93A1A1">.</span><span style="color: #657B83">line(inputs</span><span style="color: #93A1A1">.</span><span style="color: #657B83">df,</span> <span style="color: #657B83">x</span><span style="color: #93A1A1">=</span><span style="color: #2AA198">'day_of_year'</span><span style="color: #657B83">,</span> <span style="color: #657B83">y</span><span style="color: #93A1A1">=</span><span style="color: #2AA198">'quantity_sold'</span><span style="color: #657B83">,</span> <span style="color: #657B83">color</span><span style="color: #93A1A1">=</span><span style="color: #2AA198">'year'</span><span style="color: #657B83">,</span> 
              <span style="color: #657B83">title</span><span style="color: #93A1A1">=</span><span style="color: #2AA198">"Yearly Sales Cycles Overlayed"</span><span style="color: #657B83">,</span>
              <span style="color: #657B83">labels</span><span style="color: #93A1A1">=</span><span style="color: #657B83">{</span><span style="color: #2AA198">'day_of_year'</span><span style="color: #657B83">:</span> <span style="color: #2AA198">'Day of Year'</span><span style="color: #657B83">,</span> <span style="color: #2AA198">'quantity_sold'</span><span style="color: #657B83">:</span> <span style="color: #2AA198">'Quantity Sold'</span><span style="color: #657B83">})</span>
<span style="color: #657B83">task_success(fig)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea">
<div style="border: 1px solid #e1e4e8; border-radius: 8px; padding: 16px; margin: 8px 0; background: #f6f8fa;">
<div style="font-weight: 600; color: #24292e; margin-bottom: 8px; font-size: 14px;">
            ‚úÖ SuccessEvent - viz_expert
        </div>
<div style="font-size: 12px; color: #6a737d; margin-bottom: 12px;">
            2025-07-25T11:30:28Z ‚Ä¢ <code style="background: #f1f3f4; padding: 1px 4px; border-radius: 2px; font-family: monospace; font-size: 11px;">f2e781ec</code>
</div>
<div style="margin-bottom: 16px;">
<div style="font-weight: 600; margin-bottom: 6px; color: #28a745; font-size: 13px;">
            ‚ú® Result:
        </div>
<div style="background: #fff; padding: 12px; border-radius: 6px; border-left: 3px solid #28a745; color: #24292e; line-height: 1.4;">
<div style="margin: 5px 0;"><div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
<script charset="utf-8" crossorigin="anonymous" integrity="sha256-oy6Be7Eh6eiQFs5M7oXuPxxm9qbJXEtTpfSI93dW16Q=" src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script> <div class="plotly-graph-div" id="46911389-effd-40c7-8adf-559c804c6522" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("46911389-effd-40c7-8adf-559c804c6522")) {                    Plotly.newPlot(                        "46911389-effd-40c7-8adf-559c804c6522",                        [{"hovertemplate":"year=2022\u003cbr\u003eDay of Year=%{x}\u003cbr\u003eQuantity Sold=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"2022","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"2022","orientation":"v","showlegend":true,"x":{"dtype":"i4","bdata":"AQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAAJQAAACYAAAAnAAAAKAAAACkAAAAqAAAAKwAAACwAAAAtAAAALgAAAC8AAAAwAAAAMQAAADIAAAAzAAAANAAAADUAAAA2AAAANwAAADgAAAA5AAAAOgAAADsAAAA8AAAAPQAAAD4AAAA\u002fAAAAQAAAAEEAAABCAAAAQwAAAEQAAABFAAAARgAAAEcAAABIAAAASQAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAAFAAAABRAAAAUgAAAFMAAABUAAAAVQAAAFYAAABXAAAAWAAAAFkAAABaAAAAWwAAAFwAAABdAAAAXgAAAF8AAABgAAAAYQAAAGIAAABjAAAAZAAAAGUAAABmAAAAZwAAAGgAAABpAAAAagAAAGsAAABsAAAAbQAAAG4AAABvAAAAcAAAAHEAAAByAAAAcwAAAHQAAAB1AAAAdgAAAHcAAAB4AAAAeQAAAHoAAAB7AAAAfAAAAH0AAAB+AAAAfwAAAIAAAACBAAAAggAAAIMAAACEAAAAhQAAAIYAAACHAAAAiAAAAIkAAACKAAAAiwAAAIwAAACNAAAAjgAAAI8AAACQAAAAkQAAAJIAAACTAAAAlAAAAJUAAACWAAAAlwAAAJgAAACZAAAAmgAAAJsAAACcAAAAnQAAAJ4AAACfAAAAoAAAAKEAAACiAAAAowAAAKQAAAClAAAApgAAAKcAAACoAAAAqQAAAKoAAACrAAAArAAAAK0AAACuAAAArwAAALAAAACxAAAAsgAAALMAAAC0AAAAtQAAALYAAAC3AAAAuAAAALkAAAC6AAAAuwAAALwAAAC9AAAAvgAAAL8AAADAAAAAwQAAAMIAAADDAAAAxAAAAMUAAADGAAAAxwAAAMgAAADJAAAAygAAAMsAAADMAAAAzQAAAM4AAADPAAAA0AAAANEAAADSAAAA0wAAANQAAADVAAAA1gAAANcAAADYAAAA2QAAANoAAADbAAAA3AAAAN0AAADeAAAA3wAAAOAAAADhAAAA4gAAAOMAAADkAAAA5QAAAOYAAADnAAAA6AAAAOkAAADqAAAA6wAAAOwAAADtAAAA7gAAAO8AAADwAAAA8QAAAPIAAADzAAAA9AAAAPUAAAD2AAAA9wAAAPgAAAD5AAAA+gAAAPsAAAD8AAAA\u002fQAAAP4AAAD\u002fAAAAAAEAAAEBAAACAQAAAwEAAAQBAAAFAQAABgEAAAcBAAAIAQAACQEAAAoBAAALAQAADAEAAA0BAAAOAQAADwEAABABAAARAQAAEgEAABMBAAAUAQAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAABwBAAAdAQAAHgEAAB8BAAAgAQAAIQEAACIBAAAjAQAAJAEAACUBAAAmAQAAJwEAACgBAAApAQAAKgEAACsBAAAsAQAALQEAAC4BAAAvAQAAMAEAADEBAAAyAQAAMwEAADQBAAA1AQAANgEAADcBAAA4AQAAOQEAADoBAAA7AQAAPAEAAD0BAAA+AQAAPwEAAEABAABBAQAAQgEAAEMBAABEAQAARQEAAEYBAABHAQAASAEAAEkBAABKAQAASwEAAEwBAABNAQAATgEAAE8BAABQAQAAUQEAAFIBAABTAQAAVAEAAFUBAABWAQAAVwEAAFgBAABZAQAAWgEAAFsBAABcAQAAXQEAAF4BAABfAQAAYAEAAGEBAABiAQAAYwEAAGQBAABlAQAAZgEAAGcBAABoAQAAaQEAAGoBAABrAQAAbAEAAG0BAAA="},"xaxis":"x","y":{"dtype":"i1","bdata":"AgAHEAsBAQMMBgMKAAUGAQYHBAEMAw0FAAEJAAUHBxQYDQsbCiERDhsCBgsQDwIOCB4LFhYFBwcTFRYxGBMYHx0lHjUVKxUFIiEMHiQfDiMhLwsVDCo5JSARQBkpNScpMywoPRMvTksVLRc\u002fLig8GjIsJDo+NAk9OEIWShhLEyUtMCstMyEwJ0YaWytVWks3KC4mTSlcUA80LTw0YjphGDw+J0goLUQ8ImlOEDxMKj88Qzs\u002fSRpSUlw9LkFKUg8VUi44Qy41FzUbSBlPMDpHVSsWSRE4PDwoKisjIRULMhYpIhwZNTNGOiJBGkI8KSIeHjQ6FDEhIA8JIS8sJR0bFRoPKCcHDhkVGRwVHyAcEB0fEwYYDAAIDA0LAAYZFwcDExcNBwQSCRcIDwcFGAgFEwIABgEFAAoAAwIGCwQACgYJAAMOAAAGAQcACQQFBgAAAQAAAwAAAQIAAAAHAAAACAAAAAAAAAsDAwAAAAA="},"yaxis":"y","type":"scatter"},{"hovertemplate":"year=2023\u003cbr\u003eDay of Year=%{x}\u003cbr\u003eQuantity Sold=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"2023","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"2023","orientation":"v","showlegend":true,"x":{"dtype":"i4","bdata":"AQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAAJQAAACYAAAAnAAAAKAAAACkAAAAqAAAAKwAAACwAAAAtAAAALgAAAC8AAAAwAAAAMQAAADIAAAAzAAAANAAAADUAAAA2AAAANwAAADgAAAA5AAAAOgAAADsAAAA8AAAAPQAAAD4AAAA\u002fAAAAQAAAAEEAAABCAAAAQwAAAEQAAABFAAAARgAAAEcAAABIAAAASQAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAAFAAAABRAAAAUgAAAFMAAABUAAAAVQAAAFYAAABXAAAAWAAAAFkAAABaAAAAWwAAAFwAAABdAAAAXgAAAF8AAABgAAAAYQAAAGIAAABjAAAAZAAAAGUAAABmAAAAZwAAAGgAAABpAAAAagAAAGsAAABsAAAAbQAAAG4AAABvAAAAcAAAAHEAAAByAAAAcwAAAHQAAAB1AAAAdgAAAHcAAAB4AAAAeQAAAHoAAAB7AAAAfAAAAH0AAAB+AAAAfwAAAIAAAACBAAAAggAAAIMAAACEAAAAhQAAAIYAAACHAAAAiAAAAIkAAACKAAAAiwAAAIwAAACNAAAAjgAAAI8AAACQAAAAkQAAAJIAAACTAAAAlAAAAJUAAACWAAAAlwAAAJgAAACZAAAAmgAAAJsAAACcAAAAnQAAAJ4AAACfAAAAoAAAAKEAAACiAAAAowAAAKQAAAClAAAApgAAAKcAAACoAAAAqQAAAKoAAACrAAAArAAAAK0AAACuAAAArwAAALAAAACxAAAAsgAAALMAAAC0AAAAtQAAALYAAAC3AAAAuAAAALkAAAC6AAAAuwAAALwAAAC9AAAAvgAAAL8AAADAAAAAwQAAAMIAAADDAAAAxAAAAMUAAADGAAAAxwAAAMgAAADJAAAAygAAAMsAAADMAAAAzQAAAM4AAADPAAAA0AAAANEAAADSAAAA0wAAANQAAADVAAAA1gAAANcAAADYAAAA2QAAANoAAADbAAAA3AAAAN0AAADeAAAA3wAAAOAAAADhAAAA4gAAAOMAAADkAAAA5QAAAOYAAADnAAAA6AAAAOkAAADqAAAA6wAAAOwAAADtAAAA7gAAAO8AAADwAAAA8QAAAPIAAADzAAAA9AAAAPUAAAD2AAAA9wAAAPgAAAD5AAAA+gAAAPsAAAD8AAAA\u002fQAAAP4AAAD\u002fAAAAAAEAAAEBAAACAQAAAwEAAAQBAAAFAQAABgEAAAcBAAAIAQAACQEAAAoBAAALAQAADAEAAA0BAAAOAQAADwEAABABAAARAQAAEgEAABMBAAAUAQAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAABwBAAAdAQAAHgEAAB8BAAAgAQAAIQEAACIBAAAjAQAAJAEAACUBAAAmAQAAJwEAACgBAAApAQAAKgEAACsBAAAsAQAALQEAAC4BAAAvAQAAMAEAADEBAAAyAQAAMwEAADQBAAA1AQAANgEAADcBAAA4AQAAOQEAADoBAAA7AQAAPAEAAD0BAAA+AQAAPwEAAEABAABBAQAAQgEAAEMBAABEAQAARQEAAEYBAABHAQAASAEAAEkBAABKAQAASwEAAEwBAABNAQAATgEAAE8BAABQAQAAUQEAAFIBAABTAQAAVAEAAFUBAABWAQAAVwEAAFgBAABZAQAAWgEAAFsBAABcAQAAXQEAAF4BAABfAQAAYAEAAGEBAABiAQAAYwEAAGQBAABlAQAAZgEAAGcBAABoAQAAaQEAAGoBAABrAQAAbAEAAG0BAAA="},"xaxis":"x","y":{"dtype":"i1","bdata":"CAoJAAYEBAEEDwAEAAAHAAUHBQYBAQAABwMGCgYDABUPGwkRBg8OAhkYEwwMAQIHEAwUDQ4MGxAQAxYiGBE1Aw0zGRULFBofNQYlIQ4QIBgZIygTHhEUGCAZEx5CPhUoEikyEB4lGR4jMTsYFUI\u002fIy8lFjkkIjY4NFsYTyUSQ0IwNkgvMSFCID4hKkAdMTASNyBZFy5BWT5RQURjGFpNIkdHTx1qHBkhTScrORArHjVJRCIfVzA7U0ZiRhkjKU8YJTUjLzMZSzpQNjpMKk5IVlcZGjYXLTFDDRs+FxUZPCUdRiM9OiVFHxtBQD47GhM3QBk0IzIrLhUvGRQaLSsWERMlCy0aJRMpDhcgHR4dDiIuEB8JEBwaEAoOIQMZFgwUBxQGDxAXERMUBwYLBQoJBgACFAwGCAsHAwcHAAIAAgwBAAEFAAkJBg0ACgkAAAEAAgACAAAGAAAEAAEBAAgABQAACQAAAAAAAAMAAAA="},"yaxis":"y","type":"scatter"}],                        {"legend":{"title":{"text":"year"},"tracegroupgap":0},"template":{"data":{"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"title":{"text":"Yearly Sales Cycles Overlayed"},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Day of Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Quantity Sold"}}},                        {"responsive": true}                    )                };            </script> </div></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Conclusion:-The-agex-Difference">Conclusion: The <code>agex</code> Difference<a class="anchor-link" href="#Conclusion:-The-agex-Difference">¬∂</a></h3><p>We just orchestrated a complex workflow involving a database, a large dataset, and a visualization library, all using natural language prompts.</p>
<p>Crucially, we leveraged the powerful abstractions we <em>already</em> use as developers (<code>pandas.DataFrame</code>, <code>plotly.Figure</code>) instead of being forced into a restrictive tool-calling paradigm. The agents worked with our existing code and objects natively.</p>
<p>This is the core advantage of <code>agex</code>: it respects your code and enables a more powerful, flexible, and Pythonic way to build agentic systems.</p>
<hr/>
<p><strong>Want to see what the agents actually generated?</strong> The responses used in this demo are stored in <code>examples/notebook/helper.py</code> as <code>DB_QUERY_RESPONSE</code> and <code>VISUALIZATION_RESPONSE</code>. They are real LLM outputs, captured for reproducibility.</p>
</div>
</div>
</div>
